<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>動画一覧 - 管理者ダッシュボード</title>
    <link href="../dist/output.css" rel="stylesheet">
    <script src="../dist/tailwind.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div id="sidebar" class="w-64 bg-white shadow-lg transform lg:transform-none transition-transform duration-300 -translate-x-full lg:translate-x-0 fixed lg:static inset-y-0 left-0 z-30 flex-shrink-0">
            <div class="flex items-center justify-between h-16 px-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-graduation-cap text-white text-sm"></i>
                    </div>
                    <h1 class="text-xl font-bold text-gray-900">トレーニング管理</h1>
                </div>
                <button id="closeSidebar" class="lg:hidden text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <nav class="mt-6 px-3">
                <div class="space-y-3">
                    <a href="dashboard.html" class="flex items-center px-3 py-2 text-sm font-medium text-primary-700 bg-primary-50 rounded-lg border-l-4 border-primary-600">
                        <i class="fas fa-tachometer-alt w-5 h-5 mr-3"></i>
                        ダッシュボード
                    </a>
                    <a href="users.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-users w-5 h-5 mr-3"></i>
                        ユーザー一覧
                    </a>
                    <a href="tags.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-tags w-5 h-5 mr-3"></i>
                        タグ
                    </a>
                    <a href="video-list.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-video w-5 h-5 mr-3"></i>
                        動画一覧
                    </a>
                    <a href="training-list.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-book w-5 h-5 mr-3"></i>
                        トレーニング一覧
                    </a>
                    <a href="create-test.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-clipboard-check w-5 h-5 mr-3"></i>
                        テスト作成
                    </a>
                    <a href="assignment-list.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-tasks w-5 h-5 mr-3"></i>
                        課題一覧
                    </a>
                    <a href="assignment-review.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-clipboard-list w-5 h-5 mr-3"></i>
                        課題レビュー
                        <span class="ml-auto bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full">4</span>
                    </a>
                    <a href="departments.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-building w-5 h-5 mr-3"></i>
                        部門
                    </a>
                    <a href="roles.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-user-tag w-5 h-5 mr-3"></i>
                        役割
                    </a>
                    <a href="change-password.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200">
                        <i class="fas fa-key w-5 h-5 mr-3"></i>
                        パスワード変更
                    </a>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div id="mainContent" class="flex-1 flex flex-col transition-all duration-300 min-w-0">
            <!-- Top Navigation -->
            <header class="bg-white shadow-sm border-b border-gray-200">
                <div class="flex items-center justify-between px-6 py-4">
                    <div class="flex items-center space-x-4">
                        <button id="openSidebar" class="lg:hidden text-gray-500 hover:text-gray-700">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                        <button id="toggleSidebar" class="hidden lg:block text-gray-500 hover:text-gray-700">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <!-- User Profile -->
                        <div class="flex items-center space-x-3">
                            <div class="relative">
                                <button class="flex items-center space-x-2 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                                    <div class="w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center">
                                        <span class="text-white font-medium text-sm">A</span>
                                    </div>
                                    <span class="text-gray-700 font-medium">管理者ユーザー</span>
                                    <i class="fas fa-chevron-down text-gray-400"></i>
                                </button>
                            </div>
                    </div>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <main class="flex-1 overflow-y-auto bg-gray-50">
                <div class="px-6 py-8">
                    <!-- Page Header -->
                    <div class="flex items-center justify-between mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">動画</h2>
            </div>
                        <button onclick="showAddVideoModal()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200">
                            <i class="fas fa-plus mr-2"></i>
                            新規動画追加
                        </button>
                    </div>
                    
                    <!-- Filters Card -->
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6">
                        <div class="px-6 py-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ステータス</label>
                                    <select class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">すべてのステータス</option>
                                        <option value="published">公開済み</option>
                                        <option value="draft">下書き</option>
                                        <option value="archived">アーカイブ済み</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">カテゴリ</label>
                                    <select class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">すべてのカテゴリ</option>
                                        <option value="training">トレーニング</option>
                                        <option value="tutorial">チュートリアル</option>
                                        <option value="presentation">プレゼンテーション</option>
                                        <option value="demo">デモ</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">検索</label>
                                    <div class="flex gap-2">
                                        <input type="text" id="searchInput" placeholder="タイトルまたは説明で検索..." class="flex-1 px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <button id="searchButton" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200">
                                            検索
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Videos Table Card -->
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                        
                        <div class="overflow-x-auto">
                            <table class="w-full min-w-[800px] divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4">動画</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/8">カテゴリ</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/8">再生時間</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/8">アップロード日</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/8">ステータス</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/8">アクション</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50 transition-colors duration-200">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-16 w-24">
                                                    <div class="h-16 w-24 bg-gray-200 rounded-lg flex items-center justify-center">
                                                        <i class="fas fa-play text-gray-400 text-lg"></i>
                                                    </div>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">Introduction to JavaScript</div>
                                                    <div class="text-sm text-gray-500">Learn the basics of JavaScript programming</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Training</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">15:30</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2024-01-15</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                公開済み
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <div class="flex items-center space-x-2">
                                                <button class="text-blue-600 hover:text-blue-900 transition-colors duration-200" onclick="viewVideoDetails('Introduction to JavaScript')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="text-primary-600 hover:text-primary-900 transition-colors duration-200" onclick="showEditVideoModal('Introduction to JavaScript')">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="text-red-600 hover:text-red-900 transition-colors duration-200">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 transition-colors duration-200">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-16 w-24">
                                                    <div class="h-16 w-24 bg-gray-200 rounded-lg flex items-center justify-center">
                                                        <i class="fas fa-play text-gray-400 text-lg"></i>
                                                    </div>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">React Fundamentals</div>
                                                    <div class="text-sm text-gray-500">Complete guide to React development</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Tutorial</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">28:45</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2024-01-10</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                公開済み
                                </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <div class="flex items-center space-x-2">
                                                <button class="text-blue-600 hover:text-blue-900 transition-colors duration-200" onclick="viewVideoDetails('React Fundamentals')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="text-primary-600 hover:text-primary-900 transition-colors duration-200" onclick="showEditVideoModal('React Fundamentals')">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="text-red-600 hover:text-red-900 transition-colors duration-200">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 transition-colors duration-200">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-16 w-24">
                                                    <div class="h-16 w-24 bg-gray-200 rounded-lg flex items-center justify-center">
                                                        <i class="fas fa-play text-gray-400 text-lg"></i>
                                                    </div>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">CSS Grid Layout</div>
                                                    <div class="text-sm text-gray-500">Master CSS Grid for modern layouts</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Training</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">22:15</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2024-01-08</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                                Draft
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <div class="flex items-center space-x-2">
                                                <button class="text-blue-600 hover:text-blue-900 transition-colors duration-200" onclick="viewVideoDetails('CSS Grid Layout')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="text-primary-600 hover:text-primary-900 transition-colors duration-200" onclick="showEditVideoModal('CSS Grid Layout')">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="text-red-600 hover:text-red-900 transition-colors duration-200">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                        </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 transition-colors duration-200">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-16 w-24">
                                                    <div class="h-16 w-24 bg-gray-200 rounded-lg flex items-center justify-center">
                                                        <i class="fas fa-play text-gray-400 text-lg"></i>
                                                    </div>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">Node.js Backend Development</div>
                                                    <div class="text-sm text-gray-500">Build robust backend APIs with Node.js</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Presentation</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">45:20</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2024-01-05</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                公開済み
                                </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <div class="flex items-center space-x-2">
                                                <button class="text-blue-600 hover:text-blue-900 transition-colors duration-200" onclick="viewVideoDetails('Node.js Backend Development')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="text-primary-600 hover:text-primary-900 transition-colors duration-200" onclick="showEditVideoModal('Node.js Backend Development')">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="text-red-600 hover:text-red-900 transition-colors duration-200">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 transition-colors duration-200">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-16 w-24">
                                                    <div class="h-16 w-24 bg-gray-200 rounded-lg flex items-center justify-center">
                                                        <i class="fas fa-play text-gray-400 text-lg"></i>
                                                    </div>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">Database Design Principles</div>
                                                    <div class="text-sm text-gray-500">Learn database design best practices</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Demo</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">32:10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2024-01-03</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                                Archived
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <div class="flex items-center space-x-2">
                                                <button class="text-blue-600 hover:text-blue-900 transition-colors duration-200" onclick="viewVideoDetails('Database Design Principles')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="text-primary-600 hover:text-primary-900 transition-colors duration-200" onclick="showEditVideoModal('Database Design Principles')">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="text-red-600 hover:text-red-900 transition-colors duration-200">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        <div class="px-6 py-3 border-t border-gray-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center text-sm text-gray-700">
                                    <span>1〜5件 / 全5件の動画を表示</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="px-3 py-1 text-sm text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                        前へ
                                    </button>
                                    <button class="px-3 py-1 text-sm text-white bg-primary-600 border border-primary-600 rounded-md">
                                        1
                                    </button>
                                    <button class="px-3 py-1 text-sm text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                        次へ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            </div>
                    </div>
                    
    <script>
        // Sidebar toggle functionality
        const openSidebar = document.getElementById('openSidebar');
        const closeSidebar = document.getElementById('closeSidebar');
        const toggleSidebar = document.getElementById('toggleSidebar');
        const sidebar = document.getElementById('sidebar');

        // Open sidebar on mobile
        openSidebar.addEventListener('click', () => {
            sidebar.classList.remove('-translate-x-full');
        });

        // Close sidebar on mobile
        closeSidebar.addEventListener('click', () => {
            sidebar.classList.add('-translate-x-full');
        });

        // Toggle sidebar on desktop
        toggleSidebar.addEventListener('click', () => {
            if (window.innerWidth >= 1024) {
                sidebar.classList.toggle('hidden');
            }
        });

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', (e) => {
            if (window.innerWidth < 1024) {
                if (!sidebar.contains(e.target) && !openSidebar.contains(e.target)) {
                    sidebar.classList.add('-translate-x-full');
                }
            }
        });

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        
        searchButton.addEventListener('click', () => {
            const searchTerm = searchInput.value.trim();
            if (searchTerm) {
                // Here you would implement the actual search functionality
            } else {
                alert('Please enter a search term');
            }
        });
        
        // Allow search on Enter key press
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchButton.click();
            }
        });

        // Filter functionality
        const filterSelects = document.querySelectorAll('select');
        filterSelects.forEach(select => {
            select.addEventListener('change', (e) => {
                // Filter functionality would be implemented here
            });
        });






        // Video functions
        window.viewVideoDetails = function(videoTitle) {
            showVideoDetailsModal(videoTitle);
        };

        window.showEditVideoModal = function(videoTitle) {
            try {
                openEditVideoModal(videoTitle);
            } catch (error) {
                console.error('Error showing edit modal:', error);
            }
        };

        function openEditVideoModal(videoTitle) {
            const modal = document.getElementById('editVideoModal');
            const modalTitle = document.getElementById('editModalTitle');
            
            if (!modal) {
                console.error('editVideoModal not found');
                return;
            }
            
            if (!modalTitle) {
                console.error('editModalTitle not found');
                return;
            }
            
            // Set modal title
            modalTitle.textContent = `動画を編集 - ${videoTitle}`;
            
            // Get video data and populate form
            populateEditForm(videoTitle);
            
            // Show modal
            modal.style.display = 'block';
            modal.style.visibility = 'visible';
            modal.style.opacity = '1';
            modal.classList.remove('hidden');
            
        }

        function closeEditVideoModal() {
            const modal = document.getElementById('editVideoModal');
            if (modal) {
                modal.style.display = 'none';
                modal.style.visibility = 'hidden';
                modal.style.opacity = '0';
                modal.classList.add('hidden');
                
                // Reset form
                const form = document.getElementById('editVideoForm');
                if (form) form.reset();
                
                // Reset file input
                const fileInput = document.getElementById('editVideoFile');
                if (fileInput) fileInput.value = '';
                
                // Hide preview sections
                const filePreview = document.getElementById('editFilePreview');
                const youtubePreview = document.getElementById('editYoutubePreview');
                if (filePreview) filePreview.classList.add('hidden');
                if (youtubePreview) youtubePreview.classList.add('hidden');
                
                // Reset video thumbnail
                const currentVideoThumbnail = document.getElementById('editCurrentVideoThumbnail');
                if (currentVideoThumbnail) {
                    currentVideoThumbnail.innerHTML = `
                        <h5 class="text-sm font-medium text-gray-900 mb-2">現在の動画:</h5>
                        <div class="aspect-video bg-gray-200 rounded-lg overflow-hidden flex items-center justify-center">
                            <i class="fas fa-play text-gray-400 text-2xl"></i>
                        </div>
                    `;
                }
                
                console.log('Modal closed successfully');
            } else {
                console.error('Modal element not found for closing');
            }
        }

        function populateEditForm(videoTitle) {
            // Sample video data - in real app, this would fetch from database
            const videoData = {
                'Introduction to JavaScript': {
                    title: 'Introduction to JavaScript',
                    description: 'Learn the basics of JavaScript programming language including variables, functions, and control structures.',
                    category: 'Training',
                    assignment: 'assignment-1',
                    questionSets: [
                        { timeRange: '0-3 min', questionSet: 'javascript-basics' },
                        { timeRange: '3-6 min', questionSet: 'javascript-basics' },
                        { timeRange: '6-9 min', questionSet: 'javascript-basics' }
                    ],
                    status: 'Published',
                    uploadType: 'file',
                    fileUrl: 'https://example.com/videos/javascript-intro.mp4',
                    fileName: 'javascript-intro.mp4',
                    fileSize: '45.2 MB',
                    fileType: 'video/mp4'
                },
                'React Fundamentals': {
                    title: 'React Fundamentals',
                    description: 'Complete guide to React development covering components, state, props, and hooks.',
                    category: 'Tutorial',
                    assignment: 'assignment-2',
                    questionSets: [
                        { timeRange: '0-3 min', questionSet: 'react-fundamentals' },
                        { timeRange: '3-6 min', questionSet: 'react-fundamentals' }
                    ],
                    status: 'Published',
                    uploadType: 'youtube',
                    youtubeUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
                },
                'CSS Grid Layout': {
                    title: 'CSS Grid Layout',
                    description: 'Master CSS Grid for creating modern, responsive layouts with ease.',
                    category: 'Training',
                    assignment: 'assignment-3',
                    questionSets: [
                        { timeRange: '0-3 min', questionSet: 'css-grid' },
                        { timeRange: '3-6 min', questionSet: 'css-grid' },
                        { timeRange: '6-9 min', questionSet: 'css-grid' },
                        { timeRange: '9-12 min', questionSet: 'css-grid' }
                    ],
                    status: 'Draft',
                    uploadType: 'file',
                    fileUrl: 'https://example.com/videos/css-grid.mp4',
                    fileName: 'css-grid.mp4',
                    fileSize: '32.1 MB',
                    fileType: 'video/mp4'
                },
                'Node.js Backend Development': {
                    title: 'Node.js Backend Development',
                    description: 'Build robust backend APIs with Node.js, Express, and MongoDB.',
                    category: 'Presentation',
                    assignment: 'assignment-4',
                    questionSets: [
                        { timeRange: '0-3 min', questionSet: 'nodejs-backend' },
                        { timeRange: '3-6 min', questionSet: 'nodejs-backend' }
                    ],
                    status: 'Published',
                    uploadType: 'youtube',
                    youtubeUrl: 'https://www.youtube.com/embed/jNQXAC9IVRw'
                },
                'Database Design Principles': {
                    title: 'Database Design Principles',
                    description: 'Learn database design best practices and normalization techniques.',
                    category: 'Demo',
                    assignment: 'assignment-5',
                    questionSets: [
                        { timeRange: '0-3 min', questionSet: 'database-design' },
                        { timeRange: '3-6 min', questionSet: 'database-design' },
                        { timeRange: '6-9 min', questionSet: 'database-design' }
                    ],
                    status: 'Archived',
                    uploadType: 'file',
                    fileUrl: 'https://example.com/videos/database-design.mp4',
                    fileName: 'database-design.mp4',
                    fileSize: '56.3 MB',
                    fileType: 'video/mp4'
                }
            };
            
            const video = videoData[videoTitle];
            if (video) {
                // Populate form fields
                document.getElementById('editTitle').value = video.title;
                document.getElementById('editDescription').value = video.description;
                document.getElementById('editCategory').value = video.category;
                document.getElementById('editAssignment').value = video.assignment || '';
                document.getElementById('editStatus').value = video.status;
                
                // Populate question sets
                if (video.questionSets && Array.isArray(video.questionSets)) {
                    video.questionSets.forEach((qs, index) => {
                        const questionSetSelect = document.querySelector(`select[name="editQuestionSet${index + 1}"]`);
                        if (questionSetSelect) {
                            questionSetSelect.value = qs.questionSet;
                        }
                    });
                }
                
                // Set upload type
                if (video.uploadType === 'youtube') {
                    document.getElementById('editUploadYouTube').checked = true;
                    document.getElementById('editYoutubeUrl').value = video.youtubeUrl;
                    handleEditUploadTypeChange();
                    handleEditYouTubeUrlInput();
                } else {
                    document.getElementById('editUploadFile').checked = true;
                    handleEditUploadTypeChange();
                    
                    // Update current video thumbnail
                    if (video.fileUrl) {
                        const currentVideoThumbnail = document.getElementById('editCurrentVideoThumbnail');
                        if (currentVideoThumbnail) {
                            currentVideoThumbnail.innerHTML = `
                                <h5 class="text-sm font-medium text-gray-900 mb-2">現在の動画:</h5>
                                <div class="aspect-video bg-gray-200 rounded-lg overflow-hidden">
                                    <video class="w-full h-full object-cover" controls>
                                        <source src="${video.fileUrl}" type="${video.fileType}">
                                        Your browser does not support the video tag.
                                    </video>
                                </div>
                            `;
                        }
                    }
                }
            }
        }

        function handleEditUploadTypeChange() {
            const uploadType = document.querySelector('input[name="editUploadType"]:checked').value;
            const fileSection = document.getElementById('editFileUploadSection');
            const youtubeSection = document.getElementById('editYoutubeSection');

            if (uploadType === 'file') {
                fileSection.classList.remove('hidden');
                youtubeSection.classList.add('hidden');
            } else {
                fileSection.classList.add('hidden');
                youtubeSection.classList.remove('hidden');
            }
        }

        function handleEditFileSelect() {
            const fileInput = document.getElementById('editVideoFile');
            const file = fileInput.files[0];
            const preview = document.getElementById('editFilePreview');

            if (file) {
                // Show file info
                document.getElementById('editFileName').textContent = file.name;
                document.getElementById('editFileSize').textContent = (file.size / (1024 * 1024)).toFixed(2) + ' MB';
                document.getElementById('editFileType').textContent = file.type;
                preview.classList.remove('hidden');
            } else {
                preview.classList.add('hidden');
            }
        }

        function handleEditYouTubeUrlInput() {
            const urlInput = document.getElementById('editYoutubeUrl');
            const url = urlInput.value;
            const preview = document.getElementById('editYoutubePreview');

            if (url) {
                // Extract video ID from YouTube URL
                const videoId = extractYouTubeVideoId(url);
                if (videoId) {
                    const embedUrl = `https://www.youtube.com/embed/${videoId}`;
                    document.getElementById('editYoutubeEmbed').src = embedUrl;
                    preview.classList.remove('hidden');
                } else {
                    preview.classList.add('hidden');
                }
            } else {
                preview.classList.add('hidden');
            }
        }

        function submitEditVideoForm() {
            const form = document.getElementById('editVideoForm');
            const formData = new FormData(form);
            
            // Get form values
            const title = formData.get('editTitle');
            const description = formData.get('editDescription');
            const category = formData.get('editCategory');
            const assignment = formData.get('editAssignment');
            const status = formData.get('editStatus');
            const uploadType = formData.get('editUploadType');
            const videoFile = formData.get('editVideoFile');
            const youtubeUrl = formData.get('editYoutubeUrl');
            
            // Collect question sets
            const questionSets = [];
            for (let i = 1; i <= 4; i++) {
                const questionSet = formData.get(`editQuestionSet${i}`);
                if (questionSet) {
                    questionSets.push({
                        timeRange: `${(i-1)*3}-${i*3} min`,
                        questionSet: questionSet
                    });
                }
            }
            
            // Validate required fields
            if (!title || !description || !category || !assignment || !uploadType) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // Validate at least one question set is selected
            if (questionSets.length === 0) {
                alert('Please select at least one question set.');
                return;
            }
            
            // Validate based on upload type
            if (uploadType === 'file' && !videoFile.name) {
                alert('Please select a video file.');
                return;
            }
            
            if (uploadType === 'youtube' && !youtubeUrl) {
                alert('Please enter a YouTube URL.');
                return;
            }
            
            // Validate YouTube URL format
            if (uploadType === 'youtube') {
                const youtubeRegex = /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/;
                if (!youtubeRegex.test(youtubeUrl)) {
                    alert('Please enter a valid YouTube URL.');
                    return;
                }
            }
            
            console.log('Updating video:', {
                title,
                description,
                category,
                assignment,
                questionSets: questionSets,
                status,
                uploadType,
                videoFile: uploadType === 'file' ? videoFile.name : null,
                youtubeUrl: uploadType === 'youtube' ? youtubeUrl : null
            });
            
            alert('Video updated successfully!');
            closeEditVideoModal();
        }

        function showVideoDetailsModal(videoTitle) {
            const modal = document.getElementById('userDetailsModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            
            // Set modal title
            modalTitle.textContent = `動画詳細 - ${videoTitle}`;
            
            // Generate video details content based on video title
            let videoDetails = getVideoDetails(videoTitle);
            
            // Update modal content
            modalContent.innerHTML = videoDetails;
            
            // Show modal
            modal.classList.remove('hidden');
        }

        function closeVideoDetailsModal() {
            const modal = document.getElementById('userDetailsModal');
            modal.classList.add('hidden');
        }

        function getVideoDetails(videoTitle) {
            // Sample video details - in real app, this would fetch from database
            const videoData = {
                'Introduction to JavaScript': {
                    description: 'Learn the basics of JavaScript programming language including variables, functions, and control structures.',
                    category: 'Training',
                    duration: '15:30',
                    uploadDate: '2024-01-15',
                    status: 'Published',
                    fileSize: '45.2 MB',
                    resolution: '1920x1080',
                    instructor: 'John Smith',
                    uploadType: 'file',
                    fileUrl: 'https://example.com/videos/javascript-intro.mp4',
                    tags: ['JavaScript', 'Programming', 'Beginner']
                },
                'React Fundamentals': {
                    description: 'Complete guide to React development covering components, state, props, and hooks.',
                    category: 'Tutorial',
                    duration: '28:45',
                    uploadDate: '2024-01-10',
                    status: 'Published',
                    fileSize: '78.5 MB',
                    resolution: '1920x1080',
                    instructor: 'Sarah Johnson',
                    uploadType: 'youtube',
                    youtubeUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ',
                    tags: ['React', 'Frontend', 'JavaScript']
                },
                'CSS Grid Layout': {
                    description: 'Master CSS Grid for creating modern, responsive layouts with ease.',
                    category: 'Training',
                    duration: '22:15',
                    uploadDate: '2024-01-08',
                    status: 'Draft',
                    fileSize: '32.1 MB',
                    resolution: '1280x720',
                    instructor: 'Mike Davis',
                    uploadType: 'file',
                    fileUrl: 'https://example.com/videos/css-grid.mp4',
                    tags: ['CSS', 'Layout', 'Grid']
                },
                'Node.js Backend Development': {
                    description: 'Build robust backend APIs with Node.js, Express, and MongoDB.',
                    category: 'Presentation',
                    duration: '45:20',
                    uploadDate: '2024-01-05',
                    status: 'Published',
                    fileSize: '125.8 MB',
                    resolution: '1920x1080',
                    instructor: 'Emily Wilson',
                    uploadType: 'youtube',
                    youtubeUrl: 'https://www.youtube.com/embed/jNQXAC9IVRw',
                    tags: ['Node.js', 'Backend', 'API']
                },
                'Database Design Principles': {
                    description: 'Learn database design best practices and normalization techniques.',
                    category: 'Demo',
                    duration: '32:10',
                    uploadDate: '2024-01-03',
                    status: 'Archived',
                    fileSize: '56.3 MB',
                    resolution: '1280x720',
                    instructor: 'David Brown',
                    uploadType: 'file',
                    fileUrl: 'https://example.com/videos/database-design.mp4',
                    tags: ['Database', 'SQL', 'Design']
                }
            };

            const video = videoData[videoTitle] || {};
            
            return `
                <div class="space-y-6">
                    <!-- Video Preview -->
                    <div>
                        <h4 class="text-lg font-medium text-gray-900 mb-3">動画プレビュー</h4>
                        <div class="aspect-video bg-gray-200 rounded-lg overflow-hidden">
                            ${video.uploadType === 'youtube' ? 
                                `<iframe src="${video.youtubeUrl}" class="w-full h-full" frameborder="0" allowfullscreen></iframe>` :
                                `<video controls class="w-full h-full">
                                    <source src="${video.fileUrl || '#'}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>`
                            }
                        </div>
                    </div>
                    
                    <!-- Video Details -->
                    <div class="border-t border-gray-200 pt-4">
                        <h4 class="text-lg font-medium text-gray-900 mb-3">動画詳細</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">説明</label>
                                    <p class="text-sm text-gray-900">${video.description || 'N/A'}</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">カテゴリ</label>
                                    <p class="text-sm text-gray-900">${video.category || 'N/A'}</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ステータス</label>
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${video.status === 'Published' ? 'bg-green-100 text-green-800' : video.status === 'Draft' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800'}">
                                        ${video.status || 'N/A'}
                                    </span>
                                </div>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">アップロード日</label>
                                    <p class="text-sm text-gray-900">${video.uploadDate || 'N/A'}</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">再生時間</label>
                                    <p class="text-sm text-gray-900">${video.duration || 'N/A'}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Add Video Modal Functions
        function showAddVideoModal() {
            const modal = document.getElementById('addVideoModal');
            modal.classList.remove('hidden');
            
        }

        function closeAddVideoModal() {
            const modal = document.getElementById('addVideoModal');
            modal.classList.add('hidden');
            // Reset form
            document.getElementById('addVideoForm').reset();
            // Reset file input
            document.getElementById('videoFile').value = '';
            // Hide preview sections
            document.getElementById('filePreview').classList.add('hidden');
            document.getElementById('youtubePreview').classList.add('hidden');
        }

        function submitAddVideoForm() {
            const form = document.getElementById('addVideoForm');
            const formData = new FormData(form);
            
            // Get form values
            const title = formData.get('title');
            const description = formData.get('description');
            const category = formData.get('category');
            const assignment = formData.get('assignment');
            const uploadType = formData.get('uploadType');
            const videoFile = formData.get('videoFile');
            const youtubeUrl = formData.get('youtubeUrl');
            
            // Collect question sets
            const questionSets = [];
            for (let i = 1; i <= 4; i++) {
                const questionSet = formData.get(`questionSet${i}`);
                if (questionSet) {
                    questionSets.push({
                        timeRange: `${(i-1)*3}-${i*3} min`,
                        questionSet: questionSet
                    });
                }
            }
            
            // Validate required fields
            if (!title || !description || !category || !assignment || !uploadType) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // Validate at least one question set is selected
            if (questionSets.length === 0) {
                alert('Please select at least one question set.');
                return;
            }
            
            // Validate based on upload type
            if (uploadType === 'file' && !videoFile.name) {
                alert('Please select a video file.');
                return;
            }
            
            if (uploadType === 'youtube' && !youtubeUrl) {
                alert('Please enter a YouTube URL.');
                return;
            }
            
            // Validate YouTube URL format
            if (uploadType === 'youtube') {
                const youtubeRegex = /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/;
                if (!youtubeRegex.test(youtubeUrl)) {
                    alert('Please enter a valid YouTube URL.');
                    return;
                }
            }
            
            console.log('Adding new video:', {
                title,
                description,
                category,
                assignment,
                questionSets: questionSets,
                uploadType,
                videoFile: uploadType === 'file' ? videoFile.name : null,
                youtubeUrl: uploadType === 'youtube' ? youtubeUrl : null
            });
            
            alert('Video added successfully!');
            closeAddVideoModal();
        }

        function handleUploadTypeChange() {
            const uploadType = document.querySelector('input[name="uploadType"]:checked').value;
            const fileSection = document.getElementById('fileUploadSection');
            const youtubeSection = document.getElementById('youtubeSection');
            
            if (uploadType === 'file') {
                fileSection.classList.remove('hidden');
                youtubeSection.classList.add('hidden');
            } else {
                fileSection.classList.add('hidden');
                youtubeSection.classList.remove('hidden');
            }
        }

        function handleFileSelect() {
            const fileInput = document.getElementById('videoFile');
            const file = fileInput.files[0];
            const preview = document.getElementById('filePreview');
            
            if (file) {
                // Show file info
                document.getElementById('fileName').textContent = file.name;
                document.getElementById('fileSize').textContent = (file.size / (1024 * 1024)).toFixed(2) + ' MB';
                document.getElementById('fileType').textContent = file.type;
                preview.classList.remove('hidden');
            } else {
                preview.classList.add('hidden');
            }
        }

        function handleYouTubeUrlInput() {
            const urlInput = document.getElementById('youtubeUrl');
            const url = urlInput.value;
            const preview = document.getElementById('youtubePreview');
            
            if (url) {
                // Extract video ID from YouTube URL
                const videoId = extractYouTubeVideoId(url);
                if (videoId) {
                    const embedUrl = `https://www.youtube.com/embed/${videoId}`;
                    document.getElementById('youtubeEmbed').src = embedUrl;
                    preview.classList.remove('hidden');
                } else {
                    preview.classList.add('hidden');
                }
            } else {
                preview.classList.add('hidden');
            }
        }

        function extractYouTubeVideoId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }


    </script>

    <!-- User Details Modal -->
    <div id="userDetailsModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <!-- Modal Header -->
                <div class="flex items-center justify-between mb-4">
                    <h3 id="modalTitle" class="text-lg font-medium text-gray-900">User Details</h3>
                    <button onclick="closeVideoDetailsModal()" class="text-gray-400 hover:text-gray-600 transition-colors duration-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- Modal Content -->
                <div id="modalContent" class="text-sm text-gray-500">
                    <!-- Content will be dynamically populated -->
                </div>
                
                <!-- Modal Footer -->
                <div class="flex justify-end mt-6 pt-4 border-t border-gray-200">
                    <button onclick="closeVideoDetailsModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors duration-200">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Close modal when clicking outside -->
    <script>
        document.getElementById('userDetailsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeVideoDetailsModal();
            }
        });
    </script>

    <!-- Add Video Modal -->
    <div id="addVideoModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-10 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <!-- Modal Header -->
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-medium text-gray-900">新規動画追加</h3>
                    <button onclick="closeAddVideoModal()" class="text-gray-400 hover:text-gray-600 transition-colors duration-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- Modal Content -->
                <form id="addVideoForm" class="space-y-6">
                    <!-- Basic Information -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Title -->
                        <div class="md:col-span-2">
                            <label for="title" class="block text-sm font-medium text-gray-700 mb-2">動画タイトル *</label>
                            <input type="text" id="title" name="title" required class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                        </div>
                        
                        <!-- Description -->
                        <div class="md:col-span-2">
                            <label for="description" class="block text-sm font-medium text-gray-700 mb-2">説明 *</label>
                            <textarea id="description" name="description" rows="3" required class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"></textarea>
                        </div>
                        
                        <!-- Category -->
                        <div>
                            <label for="category" class="block text-sm font-medium text-gray-700 mb-2">カテゴリ *</label>
                            <select id="category" name="category" required class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <option value="">カテゴリを選択</option>
                                <option value="Training">トレーニング</option>
                                <option value="Tutorial">チュートリアル</option>
                                <option value="Presentation">プレゼンテーション</option>
                                <option value="Demo">デモ</option>
                            </select>
                        </div>

                        <!-- Status -->
                        <div>
                            <label for="status" class="block text-sm font-medium text-gray-700 mb-2">ステータス</label>
                            <select id="status" name="status" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <option value="Draft">下書き</option>
                                <option value="Published">公開済み</option>
                                <option value="Archived">アーカイブ済み</option>
                            </select>
                        </div>
                        
                        <!-- Question Sets (Dynamic based on video duration) -->
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">問題セット *</label>
                            <div id="questionSetsContainer" class="space-y-3">
                                <!-- Question Set 1 -->
                                <div class="question-set-item">
                                    <label class="block text-sm font-medium text-gray-600 mb-1">問題セット 1 (0-3分)</label>
                                    <select name="questionSet1" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">問題セットを選択</option>
                                        <option value="javascript-basics">JavaScript Basics Quiz</option>
                                        <option value="react-fundamentals">React Fundamentals Test</option>
                                        <option value="css-grid">CSS Grid Assessment</option>
                                        <option value="nodejs-backend">Node.js Backend Quiz</option>
                                        <option value="database-design">Database Design Test</option>
                                        <option value="leadership-assessment">Leadership Assessment</option>
                                        <option value="safety-quiz">Workplace Safety Quiz</option>
                                        <option value="communication-skills">Communication Skills Test</option>
                                        <option value="compliance-training">Compliance Training Test</option>
                                    </select>
                                </div>
                                
                                <!-- Question Set 2 -->
                                <div class="question-set-item">
                                    <label class="block text-sm font-medium text-gray-600 mb-1">問題セット 2 (3-6分)</label>
                                    <select name="questionSet2" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">問題セットを選択</option>
                                        <option value="javascript-basics">JavaScript Basics Quiz</option>
                                        <option value="react-fundamentals">React Fundamentals Test</option>
                                        <option value="css-grid">CSS Grid Assessment</option>
                                        <option value="nodejs-backend">Node.js Backend Quiz</option>
                                        <option value="database-design">Database Design Test</option>
                                        <option value="leadership-assessment">Leadership Assessment</option>
                                        <option value="safety-quiz">Workplace Safety Quiz</option>
                                        <option value="communication-skills">Communication Skills Test</option>
                                        <option value="compliance-training">Compliance Training Test</option>
                                    </select>
                                </div>
                                
                                <!-- Question Set 3 -->
                                <div class="question-set-item">
                                    <label class="block text-sm font-medium text-gray-600 mb-1">問題セット 3 (6-9分)</label>
                                    <select name="questionSet3" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">問題セットを選択</option>
                                        <option value="javascript-basics">JavaScript Basics Quiz</option>
                                        <option value="react-fundamentals">React Fundamentals Test</option>
                                        <option value="css-grid">CSS Grid Assessment</option>
                                        <option value="nodejs-backend">Node.js Backend Quiz</option>
                                        <option value="database-design">Database Design Test</option>
                                        <option value="leadership-assessment">Leadership Assessment</option>
                                        <option value="safety-quiz">Workplace Safety Quiz</option>
                                        <option value="communication-skills">Communication Skills Test</option>
                                        <option value="compliance-training">Compliance Training Test</option>
                                    </select>
                                </div>
                                
                                <!-- Question Set 4 -->
                                <div class="question-set-item">
                                    <label class="block text-sm font-medium text-gray-600 mb-1">問題セット 4 (9-12分)</label>
                                    <select name="questionSet4" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">問題セットを選択</option>
                                        <option value="javascript-basics">JavaScript Basics Quiz</option>
                                        <option value="react-fundamentals">React Fundamentals Test</option>
                                        <option value="css-grid">CSS Grid Assessment</option>
                                        <option value="nodejs-backend">Node.js Backend Quiz</option>
                                        <option value="database-design">Database Design Test</option>
                                        <option value="leadership-assessment">Leadership Assessment</option>
                                        <option value="safety-quiz">Workplace Safety Quiz</option>
                                        <option value="communication-skills">Communication Skills Test</option>
                                        <option value="compliance-training">Compliance Training Test</option>
                                    </select>
                                </div>
                            </div>
                            <p class="mt-2 text-sm text-gray-500">問題セットは動画の長さに応じて動的に表示されます（30分 = 10問題セット）</p>
                        </div>
                        
                        <!-- Assignment -->
                        <div class="md:col-span-2">
                            <label for="assignment" class="block text-sm font-medium text-gray-700 mb-2">課題 *</label>
                            <select id="assignment" name="assignment" required class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <option value="">課題を選択</option>
                                <option value="assignment-1">Assignment 1: JavaScript Fundamentals</option>
                                <option value="assignment-2">Assignment 2: React Components</option>
                                <option value="assignment-3">Assignment 3: CSS Grid Layout</option>
                                <option value="assignment-4">Assignment 4: Node.js API Development</option>
                                <option value="assignment-5">Assignment 5: Database Design</option>
                                <option value="assignment-6">Assignment 6: Leadership Skills</option>
                                <option value="assignment-7">Assignment 7: Safety Protocols</option>
                                <option value="assignment-8">Assignment 8: Communication Skills</option>
                                <option value="assignment-9">Assignment 9: Compliance Training</option>
                                <option value="assignment-10">Assignment 10: Project Management</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Upload Type Selection -->
                    <div class="border-t border-gray-200 pt-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">アップロード方法</h4>
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <input type="radio" id="uploadFile" name="uploadType" value="file" checked onchange="handleUploadTypeChange()" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300">
                                <label for="uploadFile" class="ml-3 block text-sm font-medium text-gray-700">
                                    <i class="fas fa-cloud-upload-alt mr-2"></i>
                                    動画ファイルをアップロード（S3）
                                </label>
                                </div>
                            <div class="flex items-center">
                                <input type="radio" id="uploadYouTube" name="uploadType" value="youtube" onchange="handleUploadTypeChange()" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300">
                                <label for="uploadYouTube" class="ml-3 block text-sm font-medium text-gray-700">
                                    <i class="fab fa-youtube mr-2 text-red-600"></i>
                                    YouTube動画リンク
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- File Upload Section -->
                    <div id="fileUploadSection" class="border-t border-gray-200 pt-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">動画ファイルをアップロード</h4>
                        <div class="space-y-4">
                            <div>
                                <label for="videoFile" class="block text-sm font-medium text-gray-700 mb-2">動画ファイルを選択 *</label>
                                <input type="file" id="videoFile" name="videoFile" accept="video/*" onchange="handleFileSelect()" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <p class="mt-1 text-sm text-gray-500">対応形式: MP4, AVI, MOV, WMV（最大500MB）</p>
                            </div>
                            
                            <!-- File Preview -->
                            <div id="filePreview" class="hidden bg-gray-50 rounded-lg p-4">
                                <h5 class="text-sm font-medium text-gray-900 mb-2">ファイル情報:</h5>
                                <div class="space-y-2 text-sm text-gray-600">
                                    <div><strong>名前:</strong> <span id="fileName"></span></div>
                                    <div><strong>サイズ:</strong> <span id="fileSize"></span></div>
                                    <div><strong>種類:</strong> <span id="fileType"></span></div>
                                </div>
                                </div>
                            </div>
                        </div>

                    <!-- YouTube Section -->
                    <div id="youtubeSection" class="hidden border-t border-gray-200 pt-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">YouTube動画</h4>
                        <div class="space-y-4">
                            <div>
                                <label for="youtubeUrl" class="block text-sm font-medium text-gray-700 mb-2">YouTube URL *</label>
                                <input type="url" id="youtubeUrl" name="youtubeUrl" placeholder="https://www.youtube.com/watch?v=..." oninput="handleYouTubeUrlInput()" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <p class="mt-1 text-sm text-gray-500">有効なYouTube動画URLを入力</p>
                            </div>
                            
                            <!-- YouTube Preview -->
                            <div id="youtubePreview" class="hidden">
                                <h5 class="text-sm font-medium text-gray-900 mb-2">動画プレビュー:</h5>
                                <div class="aspect-video bg-gray-200 rounded-lg overflow-hidden">
                                    <iframe id="youtubeEmbed" class="w-full h-full" frameborder="0" allowfullscreen></iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                
                <!-- Modal Footer -->
                <div class="flex justify-end space-x-3 mt-8 pt-4 border-t border-gray-200">
                    <button onclick="closeAddVideoModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors duration-200">
                        キャンセル
                    </button>
                    <button onclick="submitAddVideoForm()" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200">
                        動画を追加
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Close add video modal when clicking outside -->
    <script>
        document.getElementById('addVideoModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeAddVideoModal();
            }
        });
    </script>

    <!-- Edit Video Modal -->
    <div id="editVideoModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-[9999]">
        <div class="relative top-10 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <!-- Modal Header -->
                <div class="flex items-center justify-between mb-6">
                    <h3 id="editModalTitle" class="text-xl font-medium text-gray-900">動画を編集</h3>
                    <button onclick="closeEditVideoModal()" class="text-gray-400 hover:text-gray-600 transition-colors duration-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- Modal Content -->
                <form id="editVideoForm" class="space-y-6">
                    <!-- Basic Information -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Title -->
                        <div class="md:col-span-2">
                            <label for="editTitle" class="block text-sm font-medium text-gray-700 mb-2">動画タイトル *</label>
                            <input type="text" id="editTitle" name="editTitle" required class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                        </div>
                        
                        <!-- Description -->
                        <div class="md:col-span-2">
                            <label for="editDescription" class="block text-sm font-medium text-gray-700 mb-2">説明 *</label>
                            <textarea id="editDescription" name="editDescription" rows="3" required class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"></textarea>
                        </div>
                        
                        <!-- Category -->
                        <div>
                            <label for="editCategory" class="block text-sm font-medium text-gray-700 mb-2">カテゴリ *</label>
                            <select id="editCategory" name="editCategory" required class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <option value="">カテゴリを選択</option>
                                <option value="Training">トレーニング</option>
                                <option value="Tutorial">チュートリアル</option>
                                <option value="Presentation">プレゼンテーション</option>
                                <option value="Demo">デモ</option>
                            </select>
                        </div>
                        
                        <!-- Status -->
                        <div>
                            <label for="editStatus" class="block text-sm font-medium text-gray-700 mb-2">ステータス</label>
                            <select id="editStatus" name="editStatus" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <option value="Draft">下書き</option>
                                <option value="Published">公開済み</option>
                                <option value="Archived">アーカイブ済み</option>
                            </select>
                        </div>
                        
                        <!-- Question Sets (Dynamic based on video duration) -->
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">問題セット *</label>
                            <div id="editQuestionSetsContainer" class="space-y-3">
                                <!-- Question Set 1 -->
                                <div class="question-set-item">
                                    <label class="block text-sm font-medium text-gray-600 mb-1">問題セット 1 (0-3分)</label>
                                    <select name="editQuestionSet1" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">問題セットを選択</option>
                                        <option value="javascript-basics">JavaScript Basics Quiz</option>
                                        <option value="react-fundamentals">React Fundamentals Test</option>
                                        <option value="css-grid">CSS Grid Assessment</option>
                                        <option value="nodejs-backend">Node.js Backend Quiz</option>
                                        <option value="database-design">Database Design Test</option>
                                        <option value="leadership-assessment">Leadership Assessment</option>
                                        <option value="safety-quiz">Workplace Safety Quiz</option>
                                        <option value="communication-skills">Communication Skills Test</option>
                                        <option value="compliance-training">Compliance Training Test</option>
                                    </select>
                                </div>
                                
                                <!-- Question Set 2 -->
                                <div class="question-set-item">
                                    <label class="block text-sm font-medium text-gray-600 mb-1">問題セット 2 (3-6分)</label>
                                    <select name="editQuestionSet2" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">問題セットを選択</option>
                                        <option value="javascript-basics">JavaScript Basics Quiz</option>
                                        <option value="react-fundamentals">React Fundamentals Test</option>
                                        <option value="css-grid">CSS Grid Assessment</option>
                                        <option value="nodejs-backend">Node.js Backend Quiz</option>
                                        <option value="database-design">Database Design Test</option>
                                        <option value="leadership-assessment">Leadership Assessment</option>
                                        <option value="safety-quiz">Workplace Safety Quiz</option>
                                        <option value="communication-skills">Communication Skills Test</option>
                                        <option value="compliance-training">Compliance Training Test</option>
                                    </select>
                                </div>
                                
                                <!-- Question Set 3 -->
                                <div class="question-set-item">
                                    <label class="block text-sm font-medium text-gray-600 mb-1">問題セット 3 (6-9分)</label>
                                    <select name="editQuestionSet3" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">問題セットを選択</option>
                                        <option value="javascript-basics">JavaScript Basics Quiz</option>
                                        <option value="react-fundamentals">React Fundamentals Test</option>
                                        <option value="css-grid">CSS Grid Assessment</option>
                                        <option value="nodejs-backend">Node.js Backend Quiz</option>
                                        <option value="database-design">Database Design Test</option>
                                        <option value="leadership-assessment">Leadership Assessment</option>
                                        <option value="safety-quiz">Workplace Safety Quiz</option>
                                        <option value="communication-skills">Communication Skills Test</option>
                                        <option value="compliance-training">Compliance Training Test</option>
                                    </select>
                                </div>
                                
                                <!-- Question Set 4 -->
                                <div class="question-set-item">
                                    <label class="block text-sm font-medium text-gray-600 mb-1">問題セット 4 (9-12分)</label>
                                    <select name="editQuestionSet4" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                        <option value="">問題セットを選択</option>
                                        <option value="javascript-basics">JavaScript Basics Quiz</option>
                                        <option value="react-fundamentals">React Fundamentals Test</option>
                                        <option value="css-grid">CSS Grid Assessment</option>
                                        <option value="nodejs-backend">Node.js Backend Quiz</option>
                                        <option value="database-design">Database Design Test</option>
                                        <option value="leadership-assessment">Leadership Assessment</option>
                                        <option value="safety-quiz">Workplace Safety Quiz</option>
                                        <option value="communication-skills">Communication Skills Test</option>
                                        <option value="compliance-training">Compliance Training Test</option>
                                    </select>
                                </div>
                            </div>
                            <p class="mt-2 text-sm text-gray-500">問題セットは動画の長さに応じて動的に表示されます（30分 = 10問題セット）</p>
                        </div>
                        
                        <!-- Assignment -->
                        <div class="md:col-span-2">
                            <label for="editAssignment" class="block text-sm font-medium text-gray-700 mb-2">課題 *</label>
                            <select id="editAssignment" name="editAssignment" required class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <option value="">課題を選択</option>
                                <option value="assignment-1">Assignment 1: JavaScript Fundamentals</option>
                                <option value="assignment-2">Assignment 2: React Components</option>
                                <option value="assignment-3">Assignment 3: CSS Grid Layout</option>
                                <option value="assignment-4">Assignment 4: Node.js API Development</option>
                                <option value="assignment-5">Assignment 5: Database Design</option>
                                <option value="assignment-6">Assignment 6: Leadership Skills</option>
                                <option value="assignment-7">Assignment 7: Safety Protocols</option>
                                <option value="assignment-8">Assignment 8: Communication Skills</option>
                                <option value="assignment-9">Assignment 9: Compliance Training</option>
                                <option value="assignment-10">Assignment 10: Project Management</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Upload Type Selection -->
                    <div class="border-t border-gray-200 pt-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">動画ソース</h4>
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <input type="radio" id="editUploadFile" name="editUploadType" value="file" checked onchange="handleEditUploadTypeChange()" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300">
                                <label for="editUploadFile" class="ml-3 block text-sm font-medium text-gray-700">
                                    <i class="fas fa-cloud-upload-alt mr-2"></i>
                                    動画ファイルをアップロード（S3）
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="editUploadYouTube" name="editUploadType" value="youtube" onchange="handleEditUploadTypeChange()" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300">
                                <label for="editUploadYouTube" class="ml-3 block text-sm font-medium text-gray-700">
                                    <i class="fab fa-youtube mr-2 text-red-600"></i>
                                    YouTube動画リンク
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- File Upload Section -->
                    <div id="editFileUploadSection" class="border-t border-gray-200 pt-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">動画ファイルをアップロード</h4>
                        <div class="space-y-4">
                            <div>
                                <label for="editVideoFile" class="block text-sm font-medium text-gray-700 mb-2">動画ファイルを選択 *</label>
                                <input type="file" id="editVideoFile" name="editVideoFile" accept="video/*" onchange="handleEditFileSelect()" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <p class="mt-1 text-sm text-gray-500">対応形式: MP4, AVI, MOV, WMV（最大500MB）</p>
                            </div>
                            
                            <!-- Current Video Thumbnail -->
                            <div id="editCurrentVideoThumbnail" class="bg-gray-50 rounded-lg p-4">
                                <h5 class="text-sm font-medium text-gray-900 mb-2">現在の動画:</h5>
                                <div class="aspect-video bg-gray-200 rounded-lg overflow-hidden flex items-center justify-center">
                                    <i class="fas fa-play text-gray-400 text-2xl"></i>
                                </div>
                            </div>
                            
                            <!-- File Preview -->
                            <div id="editFilePreview" class="hidden bg-gray-50 rounded-lg p-4">
                                <h5 class="text-sm font-medium text-gray-900 mb-2">新しいファイル情報:</h5>
                                <div class="space-y-2 text-sm text-gray-600">
                                    <div><strong>名前:</strong> <span id="editFileName"></span></div>
                                    <div><strong>サイズ:</strong> <span id="editFileSize"></span></div>
                                    <div><strong>種類:</strong> <span id="editFileType"></span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- YouTube Section -->
                    <div id="editYoutubeSection" class="hidden border-t border-gray-200 pt-6">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">YouTube動画</h4>
                        <div class="space-y-4">
                            <div>
                                <label for="editYoutubeUrl" class="block text-sm font-medium text-gray-700 mb-2">YouTube URL *</label>
                                <input type="url" id="editYoutubeUrl" name="editYoutubeUrl" placeholder="https://www.youtube.com/watch?v=..." oninput="handleEditYouTubeUrlInput()" class="block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                                <p class="mt-1 text-sm text-gray-500">有効なYouTube動画URLを入力</p>
                            </div>
                            
                            <!-- YouTube Preview -->
                            <div id="editYoutubePreview" class="hidden">
                                <h5 class="text-sm font-medium text-gray-900 mb-2">動画プレビュー:</h5>
                                <div class="aspect-video bg-gray-200 rounded-lg overflow-hidden">
                                    <iframe id="editYoutubeEmbed" class="w-full h-full" frameborder="0" allowfullscreen></iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                
                <!-- Modal Footer -->
                <div class="flex justify-end space-x-3 mt-8 pt-4 border-t border-gray-200">
                    <button onclick="closeEditVideoModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors duration-200">
                        キャンセル
                    </button>
                    <button onclick="submitEditVideoForm()" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200">
                        動画を更新
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Close edit video modal when clicking outside -->
    <script>
        document.getElementById('editVideoModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeEditVideoModal();
            }
        });
    </script>

</body>
</html> 